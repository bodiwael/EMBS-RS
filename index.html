<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IEEE EMBS E-JUST | Ri-S≈ç (ÁêÜÂâµ)</title>
<link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
  :root {
    --ieee-blue: #00629b;
    --embs-purple: #772583;
    --embs-purple-light: #96529a;
    --cyan: #00a3e0;
    --green: #27ae60;
    
    --bg-primary: #ffffff;
    --bg-secondary: #f8f9fa;
    --bg-tertiary: #e9ecef;
    --text-primary: #212529;
    --text-secondary: #495057;
    --text-tertiary: #6c757d;
    --border-color: #dee2e6;
    --card-bg: #ffffff;
    --card-shadow: 0 4px 24px rgba(0, 0, 0, 0.06);
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }
  html { scroll-behavior: smooth; }
  body { font-family: 'Open Sans', sans-serif; background: var(--bg-primary); color: var(--text-primary); line-height: 1.6; }

  /* Typography & Utilities */
  .gradient-text { background: linear-gradient(90deg, var(--ieee-blue), var(--embs-purple)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
  .section-label { display: inline-block; font-size: 0.75rem; font-weight: 700; color: var(--embs-purple); text-transform: uppercase; letter-spacing: 1.5px; margin-bottom: 0.75rem; }
  .section-title { font-size: clamp(2rem, 4vw, 2.5rem); font-weight: 700; margin-bottom: 1rem; color: var(--text-primary); }
  .section-desc { font-size: 1.1rem; color: var(--text-secondary); max-width: 700px; margin: 0 auto; line-height: 1.7; }
  .container { max-width: 1200px; margin: 0 auto; padding: 0 2rem; }
  section { padding: 100px 0; }

  /* Navigation */
  nav { position: fixed; top: 0; left: 0; right: 0; z-index: 1000; background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); border-bottom: 1px solid var(--border-color); padding: 0.75rem 2rem; display: flex; align-items: center; justify-content: space-between; }
  .nav-brand { display: flex; align-items: center; gap: 1rem; cursor: pointer; }
  .nav-logo { height: 48px; border-radius: 50%; }
  .nav-text .title { font-size: 1rem; font-weight: 700; color: var(--embs-purple); }
  .nav-text .subtitle { font-size: 0.7rem; color: var(--text-secondary); text-transform: uppercase; }
  .nav-links { display: flex; gap: 2rem; list-style: none; }
  .nav-links a { text-decoration: none; font-size: 0.9rem; font-weight: 600; color: var(--text-secondary); text-transform: uppercase; cursor: pointer; transition: 0.3s; }
  .nav-links a:hover { color: var(--embs-purple); }

  /* Buttons */
  .btn-primary { background: var(--embs-purple); color: white; padding: 0.875rem 2.5rem; border-radius: 8px; font-weight: 600; border: none; cursor: pointer; transition: all 0.3s; }
  .btn-primary:hover { background: var(--embs-purple-light); transform: translateY(-2px); box-shadow: 0 8px 20px rgba(119, 37, 131, 0.3); }
  .btn-outline { background: transparent; color: var(--embs-purple); padding: 0.875rem 2.5rem; border-radius: 8px; font-weight: 600; border: 2px solid var(--embs-purple); cursor: pointer; transition: all 0.3s; }
  .btn-outline:hover { background: var(--embs-purple); color: white; }

  /* SPA Management */
  .view-section { display: none; opacity: 0; transition: opacity 0.4s ease; }
  .view-section.active { display: block; opacity: 1; }

  /* ================= HOME VIEW STYLES ================= */
  #hero { text-align: center; background: linear-gradient(135deg, #fdfbfd 0%, var(--bg-primary) 100%); padding-top: 160px; padding-bottom: 80px; }
  .hero-logo { max-width: 140px; margin-bottom: 1.5rem; border-radius: 50%; box-shadow: var(--card-shadow); border: 4px solid white; display: block; margin-left: auto; margin-right: auto; }  .hero-title { font-size: clamp(2.5rem, 5vw, 4rem); color: var(--text-primary); margin-bottom: 1rem; line-height: 1.2;}
  
  /* Timeline Section */
  .timeline { position: relative; max-width: 800px; margin: 4rem auto 0; padding-left: 2rem; }
  .timeline::before { content: ''; position: absolute; left: 0; top: 0; bottom: 0; width: 4px; background: var(--bg-tertiary); border-radius: 4px; }
  .timeline-item { position: relative; margin-bottom: 3rem; padding-left: 2.5rem; }
  .timeline-item::before { content: ''; position: absolute; left: -11px; top: 0; width: 26px; height: 26px; border-radius: 50%; background: white; border: 4px solid var(--embs-purple); box-shadow: 0 0 0 4px var(--bg-primary); }
  .timeline-date { font-size: 0.85rem; font-weight: 700; color: var(--ieee-blue); text-transform: uppercase; margin-bottom: 0.5rem; display: block; }
  .timeline-content { background: var(--card-bg); padding: 1.5rem; border-radius: 12px; border: 1px solid var(--border-color); box-shadow: var(--card-shadow); transition: 0.3s; }
  .timeline-content:hover { border-color: var(--embs-purple); transform: translateX(10px); }
  .timeline-content h3 { color: var(--text-primary); margin-bottom: 0.5rem; }
  .timeline-content p { color: var(--text-secondary); font-size: 0.95rem; margin-bottom: 0; }

  /* Interactive Cards (Common) */
  .grid-3 { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; }
  .grid-2 { display: grid; grid-template-columns: repeat(auto-fit, minmax(450px, 1fr)); gap: 2rem; }
  
  .card-hover { background: var(--card-bg); padding: 2rem; border-radius: 12px; border: 1px solid var(--border-color); box-shadow: var(--card-shadow); transition: all 0.3s; position: relative; overflow: hidden; height: 100%; }
  .card-hover:hover { transform: translateY(-8px); border-color: var(--embs-purple); box-shadow: 0 12px 30px rgba(0,0,0,0.08); }
  .card-icon { font-size: 3rem; margin-bottom: 1.5rem; display: inline-block; }
  .card-title { font-size: 1.35rem; margin-bottom: 0.75rem; color: var(--text-primary); font-weight: 700; }
  .card-desc { font-size: 0.95rem; color: var(--text-secondary); line-height: 1.6; margin-bottom: 0; }

  /* Parallel Program Specifics */
  .program-card { border-left: 4px solid var(--ieee-blue); }
  .program-card:hover { border-left-color: var(--embs-purple); }
  .program-list { list-style: none; margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--bg-tertiary); }
  .program-list li { margin-bottom: 0.75rem; font-size: 0.9rem; color: var(--text-secondary); padding-left: 1.5rem; position: relative; }
  .program-list li::before { content: '‚Ä¢'; color: var(--embs-purple); position: absolute; left: 0; font-weight: bold; font-size: 1.2rem; line-height: 1; }

  /* Competitions Grid */
  .comp-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-top: 3rem; }
  .comp-card { background: var(--card-bg); border-radius: 16px; padding: 2rem; text-align: center; border: 1px solid var(--border-color); box-shadow: var(--card-shadow); transition: 0.3s; position: relative; overflow: hidden; }
  .comp-card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 6px; background: linear-gradient(90deg, var(--ieee-blue), var(--embs-purple)); transform: scaleX(0); transition: 0.3s; transform-origin: left; }
  .comp-card:hover { transform: translateY(-5px); }
  .comp-card:hover::before { transform: scaleX(1); }
  .comp-icon { font-size: 2.5rem; margin-bottom: 1rem; }
  .comp-card h3 { font-size: 1.1rem; margin-bottom: 0.5rem; color: var(--text-primary); }
  .comp-card p { font-size: 0.85rem; color: var(--text-secondary); }

  /* ================= APPLICATION VIEW STYLES ================= */
  #application-view { background: var(--bg-secondary); min-height: 100vh; padding-top: 120px; padding-bottom: 80px; }
  .form-container { max-width: 850px; margin: 0 auto; background: white; border-radius: 16px; box-shadow: var(--card-shadow); padding: 3rem; border: 1px solid var(--border-color); }
  
  .progress-bar { display: flex; justify-content: space-between; margin-bottom: 3rem; position: relative; }
  .progress-bar::before { content: ''; position: absolute; top: 15px; left: 0; right: 0; height: 3px; background: var(--bg-tertiary); z-index: 1; }
  .step-indicator { position: relative; z-index: 2; background: white; width: 34px; height: 34px; border-radius: 50%; border: 3px solid var(--bg-tertiary); display: flex; align-items: center; justify-content: center; font-weight: bold; color: var(--text-tertiary); transition: all 0.3s;}
  .step-indicator.active { border-color: var(--embs-purple); color: var(--embs-purple); }
  .step-indicator.completed { background: var(--embs-purple); border-color: var(--embs-purple); color: white; }
  .step-label { position: absolute; top: 45px; left: 50%; transform: translateX(-50%); font-size: 0.75rem; white-space: nowrap; color: var(--text-secondary); font-weight: 600; }

  .form-step { display: none; }
  .form-step.active { display: block; animation: fadeInRight 0.4s ease forwards; }

  .form-group { margin-bottom: 1.5rem; display: flex; flex-direction: column; gap: 0.5rem; }
  .form-group label { font-size: 0.95rem; font-weight: 600; color: var(--text-primary); }
  .form-group span.required { color: #e74c3c; }
  .form-desc { font-size: 0.85rem; color: var(--text-secondary); margin-top: -0.25rem; margin-bottom: 0.5rem; }
  
  .form-control { padding: 0.875rem 1rem; border: 1px solid var(--border-color); border-radius: 8px; font-family: inherit; font-size: 1rem; transition: 0.3s; background: var(--bg-primary); }
  .form-control:focus { outline: none; border-color: var(--embs-purple); box-shadow: 0 0 0 3px rgba(119, 37, 131, 0.1); }
  textarea.form-control { min-height: 120px; resize: vertical; }

  /* Checkbox & Radio Grids */
  .checkbox-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; }
  .checkbox-card { border: 1px solid var(--border-color); border-radius: 8px; padding: 1rem; display: flex; align-items: flex-start; gap: 0.75rem; cursor: pointer; transition: 0.2s; background: var(--bg-primary); }
  .checkbox-card:hover { border-color: var(--embs-purple); background: rgba(119, 37, 131, 0.02); }
  .checkbox-card input[type="checkbox"], .checkbox-card input[type="radio"] { margin-top: 0.25rem; transform: scale(1.2); accent-color: var(--embs-purple); }
  .checkbox-card span { font-size: 0.95rem; font-weight: 600; color: var(--text-primary); }

  .file-upload-box { border: 2px dashed var(--border-color); border-radius: 8px; padding: 2rem; text-align: center; cursor: pointer; transition: all 0.3s; background: var(--bg-secondary); }
  .file-upload-box:hover { border-color: var(--embs-purple); background: rgba(119, 37, 131, 0.02); }
  
  .form-actions { display: flex; justify-content: space-between; margin-top: 3rem; border-top: 1px solid var(--border-color); padding-top: 2rem; }

  #loading-overlay { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(255,255,255,0.95); z-index: 2000; align-items: center; justify-content: center; flex-direction: column; }
  .spinner { width: 50px; height: 50px; border: 4px solid rgba(119, 37, 131, 0.2); border-top-color: var(--embs-purple); border-radius: 50%; animation: spin 1s linear infinite; margin-bottom: 1rem; }

  @keyframes fadeInRight { from { opacity: 0; transform: translateX(20px); } to { opacity: 1; transform: translateX(0); } }
  @keyframes spin { to { transform: rotate(360deg); } }

  footer { background: var(--bg-secondary); padding: 2rem; text-align: center; border-top: 1px solid var(--border-color); }

  @media (max-width: 768px) {
    .form-container { padding: 2rem 1.5rem; }
    .step-label { display: none; }
    .grid-2 { grid-template-columns: 1fr; }
  }
</style>
</head>
<body>

<nav>
  <div class="nav-brand" onclick="switchView('home-view')">
    <img src="logo.jpg" alt="EMBS Logo" class="nav-logo" onerror="this.src=''; this.alt='EMBS';">
    <div class="nav-text">
      <div class="title">IEEE E-JUST EMBS</div>
      <div class="subtitle">Ri-S≈ç (ÁêÜÂâµ)</div>
    </div>
  </div>
  <ul class="nav-links">
    <li><a onclick="switchView('home-view')">Overview</a></li>
    <li><a onclick="switchView('application-view')" style="color: var(--embs-purple); border-bottom: 2px solid var(--embs-purple); padding-bottom: 4px;">Apply Now</a></li>
  </ul>
</nav>

<div id="home-view" class="view-section active">
  <section id="hero">
    <div class="container">
      <img src="logo.jpg" class="hero-logo" onerror="this.style.display='none'">
      <div class="section-label" style="text-align: center;">International Publication-Oriented Initiative</div>
      <h1 class="hero-title">Ri-S≈ç ÁêÜÂâµ<br><span class="gradient-text">Research Program 2026</span></h1>
      <p class="section-desc" style="margin-bottom: 2.5rem;">
        An elite program guiding ambitious applicants from talent identification to published IEEE conference papers and international competition entries. Supported by global mentorship and rigorous training.
      </p>
      <button onclick="switchView('application-view')" class="btn-primary">Apply for the Program</button>
    </div>
  </section>

  <section id="timeline" style="background: var(--bg-secondary);">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">The <span class="gradient-text">Six-Phase</span> Journey</h2>
        <p class="section-desc">A complete 12-18 month lifecycle from ideation to publication.</p>
      </div>
      
      <div class="timeline">
        <div class="timeline-item">
          <span class="timeline-date">Phase I ‚Ä¢ Recruitment</span>
          <div class="timeline-content">
            <h3>Announcement & Global Recruitment</h3>
            <p>Gathering world-class IEEE mentors, speakers, and opening international applications.</p>
          </div>
        </div>
        <div class="timeline-item">
          <span class="timeline-date">Phase II ‚Ä¢ Selection</span>
          <div class="timeline-content">
            <h3>Filtration & Assessment</h3>
            <p>Rigorous multi-layer evaluation. Top candidates bypass training and proceed directly to mentorship.</p>
          </div>
        </div>
        <div class="timeline-item">
          <span class="timeline-date">Phase III ‚Ä¢ Skill Building</span>
          <div class="timeline-content">
            <h3>Intensive Multi-Track Training (8-12 Weeks)</h3>
            <p>Hands-on technical development bridging knowledge gaps in AI, Signal Processing, and Biomedical Electronics.</p>
          </div>
        </div>
        <div class="timeline-item">
          <span class="timeline-date">Phase IV ‚Ä¢ Core Research</span>
          <div class="timeline-content">
            <h3>1-on-1 Mentorship (12-16 Weeks)</h3>
            <p>Weekly meetings with IEEE-recognized experts to develop a novel, publication-worthy research question.</p>
          </div>
        </div>
        <div class="timeline-item">
          <span class="timeline-date">Phase V ‚Ä¢ Execution</span>
          <div class="timeline-content">
            <h3>Implementation & Labs (6-10 Weeks)</h3>
            <p>Execution via simulation or hardware, supported by institutional lab access and datasets.</p>
          </div>
        </div>
        <div class="timeline-item">
          <span class="timeline-date">Phase VI ‚Ä¢ Output</span>
          <div class="timeline-content">
            <h3>Paper Drafting & Publication (6-8 Weeks)</h3>
            <p>Transforming results into IEEE conference papers and submitting to international biomedical challenges.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section id="tracks">
    <div class="container">
      <div class="section-header">
        <div class="section-label">Specialization</div>
        <h2 class="section-title">Training <span class="gradient-text">Tracks</span></h2>
        <p class="section-desc">Five intensive technology tracks aligned with biomedical engineering frontiers.</p>
      </div>
      <div class="grid-3">
        <div class="card-hover">
          <div class="card-icon">ü§ñ</div>
          <h3 class="card-title">AI & Computer Vision</h3>
          <p class="card-desc">Deep learning, medical image analysis, neural networks for diagnostics and clinical decision support.</p>
        </div>
        <div class="card-hover">
          <div class="card-icon">üìä</div>
          <h3 class="card-title">Signal Processing</h3>
          <p class="card-desc">EEG, ECG, EMG analysis, Brain-Computer Interfaces, physiological signal acquisition and feature extraction.</p>
        </div>
        <div class="card-hover">
          <div class="card-icon">üî¨</div>
          <h3 class="card-title">Bioinformatics</h3>
          <p class="card-desc">Genomics, proteomics, sequence analysis, computational biology for next-gen biomedical research.</p>
        </div>
        <div class="card-hover">
          <div class="card-icon">üíª</div>
          <h3 class="card-title">Biomedical Modeling</h3>
          <p class="card-desc">Physiological modeling, biological system simulation, finite element analysis, computational biomedical simulations.</p>
        </div>
        <div class="card-hover">
          <div class="card-icon">‚ö°</div>
          <h3 class="card-title">Electronics & Hardware</h3>
          <p class="card-desc">Biomedical instrumentation, sensor design, embedded systems, wearable devices, medical device prototyping.</p>
        </div>
      </div>
    </div>
  </section>

  <section id="parallel" style="background: var(--bg-secondary);">
    <div class="container">
      <div class="section-header">
        <div class="section-label">Continuous Learning</div>
        <h2 class="section-title">Parallel <span class="gradient-text">Programs</span></h2>
        <p class="section-desc">Two ongoing programs enriching the entire research journey.</p>
      </div>
      <div class="grid-2">
        <div class="card-hover program-card">
          <div class="card-icon">üåê</div>
          <h3 class="card-title">Research Program Series</h3>
          <p class="section-desc" style="font-size: 0.9rem; margin-bottom: 1rem;">Weekly Online Webinars & Seminars</p>
          <p class="card-desc">Weekly sessions with globally recognized speakers & biomedical founders.</p>
          <ul class="program-list">
            <li>Mandatory for enrolled applicants ‚Äî open to the public</li>
            <li>Speakers from diverse countries sharing novel tech applications</li>
            <li>Latest in biomedical AI, BCI, bioinformatics, and more</li>
            <li>Live Q&A and networking with international researchers</li>
          </ul>
        </div>
        <div class="card-hover program-card">
          <div class="card-icon">üìö</div>
          <h3 class="card-title">Research Concepts Workshops</h3>
          <p class="section-desc" style="font-size: 0.9rem; margin-bottom: 1rem;">Monthly Skill-Building Sessions</p>
          <p class="card-desc">Hands-on technical workshops ensuring publication readiness.</p>
          <ul class="program-list">
            <li>How to write research papers in LaTeX from scratch</li>
            <li>Choosing impactful research questions in biomedical fields</li>
            <li>Generating and validating scientific results for IEEE papers</li>
            <li>Navigating literature reviews and citation strategies</li>
            <li>Statistical analysis and reproducibility in biomedical research</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <section id="competitions">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">Global <span class="gradient-text">Competitions</span></h2>
        <p class="section-desc">Direct pathways for outstanding projects to be recognized on the world stage.</p>
      </div>
      <div class="comp-grid">
        <div class="comp-card">
          <div class="comp-icon">üß†</div>
          <h3>BCI Award</h3>
          <p>The premier Brain-Computer Interface competition targeting novel methodologies and neurotechnology.</p>
        </div>
        <div class="comp-card">
          <div class="comp-icon">ü©∫</div>
          <h3>NHID Challenge</h3>
          <p>Focusing on Novel Human Interface Devices, accessibility, and disability support technologies.</p>
        </div>
        <div class="comp-card">
          <div class="comp-icon">üñºÔ∏è</div>
          <h3>MICCAI</h3>
          <p>Leading medical image computing conference requiring cutting-edge AI segmentation and clinical CV.</p>
        </div>
        <div class="comp-card">
          <div class="comp-icon">üß¨</div>
          <h3>Bioinformatics</h3>
          <p>International challenges focused on genomics, proteomics, and computational systems biology.</p>
        </div>
      </div>
    </div>
  </section>
</div>

<div id="application-view" class="view-section">
  <div class="container">
    <div class="form-container">
      <div class="section-header" style="margin-bottom: 2rem;">
        <div class="section-label">Phase II Assessment</div>
        <h2 class="section-title" style="font-size: 2rem;">Program Application</h2>
        <p class="section-desc">Please complete all 5 steps accurately. We will match your interests to the correct track.</p>
      </div>

      <div class="progress-bar">
        <div class="step-indicator active" id="ind-1">1<span class="step-label">Personal</span></div>
        <div class="step-indicator" id="ind-2">2<span class="step-label">Academics</span></div>
        <div class="step-indicator" id="ind-3">3<span class="step-label">Interests</span></div>
        <div class="step-indicator" id="ind-4">4<span class="step-label">Technical</span></div>
        <div class="step-indicator" id="ind-5">5<span class="step-label">Essays</span></div>
      </div>

      <form id="researchForm" onsubmit="event.preventDefault();">
        
        <div class="form-step active" id="step-1">
          <h3 style="margin-bottom: 1.5rem; color: var(--embs-purple);">1. Personal Information</h3>
          
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
            <div class="form-group"><label>Full Name <span class="required">*</span></label><input type="text" id="a_name" class="form-control" required></div>
            <div class="form-group"><label>University <span class="required">*</span></label><input type="text" id="a_university" class="form-control" placeholder="e.g., E-JUST" required></div>
          </div>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
            <div class="form-group"><label>Email Address <span class="required">*</span></label><input type="email" id="a_email" class="form-control" required></div>
            <div class="form-group"><label>Phone Number <span class="required">*</span></label><input type="tel" id="a_phone" class="form-control" required></div>
          </div>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
            <div class="form-group"><label>Gender <span class="required">*</span></label>
              <select id="a_gender" class="form-control" required><option value="">Select</option><option>Male</option><option>Female</option></select>
            </div>
            <div class="form-group"><label>LinkedIn Profile URL</label><input type="url" id="a_linkedin" class="form-control" placeholder="https://linkedin.com/in/..."></div>
          </div>

          <div class="form-group" style="margin-top: 1rem;">
            <label>Upload CV / Portfolio (PDF only) <span class="required">*</span></label>
            <div class="file-upload-box" id="cv-dropzone" onclick="document.getElementById('a_cv').click()">
              <div style="font-size: 2rem; margin-bottom: 0.5rem;">üìÑ</div>
              <p id="cv-filename-display" style="font-weight:600; color:var(--text-secondary);">Click to upload your CV (Max 5MB)</p>
              <input type="file" id="a_cv" accept=".pdf" style="display: none;" onchange="handleFileSelect(event)">
            </div>
            <input type="hidden" id="cv_base64">
          </div>
        </div>

        <div class="form-step" id="step-2">
          <h3 style="margin-bottom: 1.5rem; color: var(--embs-purple);">2. Academic Background</h3>
          <div class="form-group"><label>Student ID <span class="required">*</span></label><input type="text" id="a_studentid" class="form-control" required></div>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
            <div class="form-group"><label>Faculty <span class="required">*</span></label><input type="text" id="a_faculty" class="form-control" placeholder="e.g., Engineering" required></div>
            <div class="form-group"><label>Department <span class="required">*</span></label><input type="text" id="a_department" class="form-control" placeholder="e.g., Biomedical" required></div>
          </div>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
            <div class="form-group"><label>Academic Year <span class="required">*</span></label>
              <select id="a_year" class="form-control" required>
                <option value="">Select</option><option>1st Year</option><option>2nd Year</option><option>3rd Year</option><option>4th Year</option><option>5th Year</option><option>Graduate / Masters</option>
              </select>
            </div>
            <div class="form-group"><label>Cumulative GPA <span class="required">*</span></label><input type="number" step="0.01" max="4.0" id="a_gpa" class="form-control" required></div>
          </div>
        </div>

        <div class="form-step" id="step-3">
          <h3 style="margin-bottom: 0.5rem; color: var(--embs-purple);">3. Research Interests & Skills</h3>
          <p class="form-desc" style="margin-bottom: 1.5rem;">Select all fields you are passionate about. We will assign your track based on these interests and your skills.</p>
          
          <div class="form-group">
            <label>Areas of Interest (Select at least one) <span class="required">*</span></label>
            <div class="checkbox-grid" id="interests-grid">
              <label class="checkbox-card"><input type="checkbox" value="Artificial Intelligence"><span>Artificial Intelligence</span></label>
              <label class="checkbox-card"><input type="checkbox" value="Computer Vision"><span>Computer Vision</span></label>
              <label class="checkbox-card"><input type="checkbox" value="Signal Processing"><span>Signal Processing (EEG/ECG)</span></label>
              <label class="checkbox-card"><input type="checkbox" value="Bioinformatics"><span>Bioinformatics</span></label>
              <label class="checkbox-card"><input type="checkbox" value="Biological Modeling"><span>Biological Modeling</span></label>
              <label class="checkbox-card"><input type="checkbox" value="Wearable Electronics"><span>Wearable Electronics</span></label>
              <label class="checkbox-card"><input type="checkbox" value="Medical Robotics"><span>Medical Robotics</span></label>
              <label class="checkbox-card"><input type="checkbox" value="Nanotechnology"><span>Nanotechnology</span></label>
            </div>
          </div>

          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-top: 2rem;">
            <div class="form-group">
              <label>Programming Competency <span class="required">*</span></label>
              <select id="s_prog" class="form-control" required>
                <option value="">Select level...</option>
                <option>None</option>
                <option>Beginner (Syntax, basic scripts)</option>
                <option>Intermediate (Libraries: NumPy, Pandas)</option>
                <option>Advanced (PyTorch, TensorFlow, OOP)</option>
              </select>
            </div>
            <div class="form-group">
              <label>Math & Statistics <span class="required">*</span></label>
              <select id="s_math" class="form-control" required>
                <option value="">Select level...</option>
                <option>Basic Algebra/Calculus</option>
                <option>Intermediate (Probability, Matrices)</option>
                <option>Advanced (Linear Algebra, Optimization)</option>
              </select>
            </div>
          </div>
        </div>

        <div class="form-step" id="step-4">
          <h3 style="margin-bottom: 0.5rem; color: var(--embs-purple);">4. Technical Assessment (MCQ)</h3>
          <p class="form-desc" style="margin-bottom: 2rem;">A brief check of foundational knowledge. It is okay if you do not know the answers; this helps us place you in the correct training tier.</p>
          
          <div class="form-group" style="background: white; padding: 1.5rem; border: 1px solid var(--border-color); border-radius: 8px;">
            <label style="font-size: 1.05rem;">Q1. In machine learning, what is the primary purpose of cross-validation? <span class="required">*</span></label>
            <div style="display: flex; flex-direction: column; gap: 0.75rem; margin-top: 1rem;">
              <label style="font-weight: 400; display:flex; gap:10px;"><input type="radio" name="mcq1" value="A" required> A) To increase the speed of training the model.</label>
              <label style="font-weight: 400; display:flex; gap:10px;"><input type="radio" name="mcq1" value="B"> B) To assess how the model will generalize to an independent dataset and prevent overfitting.</label>
              <label style="font-weight: 400; display:flex; gap:10px;"><input type="radio" name="mcq1" value="C"> C) To automatically clean missing data from the dataset.</label>
              <label style="font-weight: 400; display:flex; gap:10px;"><input type="radio" name="mcq1" value="D"> D) I don't know yet.</label>
            </div>
          </div>

          <div class="form-group" style="background: white; padding: 1.5rem; border: 1px solid var(--border-color); border-radius: 8px;">
            <label style="font-size: 1.05rem;">Q2. In biosignal processing, what is the function of a High-Pass filter? <span class="required">*</span></label>
            <div style="display: flex; flex-direction: column; gap: 0.75rem; margin-top: 1rem;">
              <label style="font-weight: 400; display:flex; gap:10px;"><input type="radio" name="mcq2" value="A" required> A) It amplifies the overall signal voltage.</label>
              <label style="font-weight: 400; display:flex; gap:10px;"><input type="radio" name="mcq2" value="B"> B) It allows low frequencies to pass while attenuating high frequencies.</label>
              <label style="font-weight: 400; display:flex; gap:10px;"><input type="radio" name="mcq2" value="C"> C) It allows high frequencies to pass while attenuating low frequencies (like baseline wander).</label>
              <label style="font-weight: 400; display:flex; gap:10px;"><input type="radio" name="mcq2" value="D"> D) I don't know yet.</label>
            </div>
          </div>

          <div class="form-group" style="background: white; padding: 1.5rem; border: 1px solid var(--border-color); border-radius: 8px;">
            <label style="font-size: 1.05rem;">Q3. When evaluating a classification model on a highly imbalanced medical dataset (e.g., 99% healthy, 1% sick), which metric is generally MOST informative? <span class="required">*</span></label>
            <div style="display: flex; flex-direction: column; gap: 0.75rem; margin-top: 1rem;">
              <label style="font-weight: 400; display:flex; gap:10px;"><input type="radio" name="mcq3" value="A" required> A) Accuracy</label>
              <label style="font-weight: 400; display:flex; gap:10px;"><input type="radio" name="mcq3" value="B"> B) F1-Score / PR-AUC</label>
              <label style="font-weight: 400; display:flex; gap:10px;"><input type="radio" name="mcq3" value="C"> C) Mean Squared Error (MSE)</label>
              <label style="font-weight: 400; display:flex; gap:10px;"><input type="radio" name="mcq3" value="D"> D) I don't know yet.</label>
            </div>
          </div>
        </div>

        <div class="form-step" id="step-5">
          <h3 style="margin-bottom: 0.5rem; color: var(--embs-purple);">5. Research & Analytical Mindset</h3>
          <p class="form-desc" style="margin-bottom: 2rem;">Please take your time answering these. Your answers here heavily influence the mentor-matching process.</p>
          
          <div class="form-group">
            <label>1. Technical Problem Solving <span class="required">*</span></label>
            <p class="form-desc">Describe a time you faced a difficult technical bug, math concept, or design flaw. How did you research and resolve it?</p>
            <textarea id="e_problem" class="form-control" required placeholder="Minimum 50 words..."></textarea>
          </div>

          <div class="form-group">
            <label>2. Open-Ended Research <span class="required">*</span></label>
            <p class="form-desc">If your mentor gives you a broad objective like "Improve early detection of stroke using ECG," what would your first week of work look like? Describe your methodology.</p>
            <textarea id="e_method" class="form-control" required placeholder="Literature review process, finding datasets, etc..."></textarea>
          </div>

          <div class="form-group">
            <label>3. Ultimate Goal <span class="required">*</span></label>
            <p class="form-desc">What specific outcome are you looking for by the end of this 12-18 month program? (e.g., A specific IEEE publication, winning a competition, learning a specific framework).</p>
            <textarea id="e_goal" class="form-control" required placeholder="Your primary motivation..."></textarea>
          </div>
        </div>

        <div class="form-actions">
          <button type="button" class="btn-outline" id="btn-prev" onclick="prevStep()" style="display: none;">Back</button>
          <div style="flex-grow: 1;"></div>
          <button type="button" class="btn-primary" id="btn-next" onclick="nextStep()">Next Step</button>
          <button type="button" class="btn-primary" id="btn-submit" onclick="submitApplication()" style="display: none; background: var(--green);">Submit Application</button>
        </div>

      </form>
    </div>
  </div>
</div>

<div id="loading-overlay">
  <div class="spinner"></div>
  <h3 style="color: var(--embs-purple); margin-bottom: 0.5rem;">Submitting Application...</h3>
  <p style="color: var(--text-secondary); font-weight: 600;">Please do not close this window.</p>
</div>

<footer>
  <p>¬© 2026 IEEE EMBS E-JUST Student Branch Chapter. All rights reserved.</p>
</footer>

<script>
  // ==========================================
  // VIEW ROUTING
  // ==========================================
  function switchView(viewId) {
    document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
    document.getElementById(viewId).classList.add('active');
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }

  // ==========================================
  // MULTI-STEP FORM LOGIC
  // ==========================================
  let currentStep = 1;
  const totalSteps = 5;
  let cvFileNameTemp = null;

  function updateFormUI() {
    document.querySelectorAll('.form-step').forEach((el, index) => {
      el.classList.toggle('active', index + 1 === currentStep);
    });

    document.querySelectorAll('.step-indicator').forEach((el, index) => {
      if (index + 1 < currentStep) el.className = 'step-indicator completed';
      else if (index + 1 === currentStep) el.className = 'step-indicator active';
      else el.className = 'step-indicator';
    });

    document.getElementById('btn-prev').style.display = currentStep > 1 ? 'block' : 'none';
    if (currentStep === totalSteps) {
      document.getElementById('btn-next').style.display = 'none';
      document.getElementById('btn-submit').style.display = 'block';
    } else {
      document.getElementById('btn-next').style.display = 'block';
      document.getElementById('btn-submit').style.display = 'none';
    }
  }

  function validateStep(step) {
    const stepEl = document.getElementById(`step-${step}`);
    let isValid = true;
    
    // Validate text inputs & selects
    const inputs = stepEl.querySelectorAll('input[required]:not([type="radio"]):not([type="checkbox"]), select[required], textarea[required]');
    inputs.forEach(input => {
      if (!input.value.trim()) {
        isValid = false;
        input.style.borderColor = '#e74c3c';
      } else {
        input.style.borderColor = 'var(--border-color)';
      }
    });

    // Specific validation for Step 1 (CV)
    if (step === 1 && !document.getElementById('cv_base64').value) {
      document.getElementById('cv-dropzone').style.borderColor = '#e74c3c';
      isValid = false;
    }

    // Specific validation for Step 3 (Checkboxes)
    if (step === 3) {
      const checked = stepEl.querySelectorAll('input[type="checkbox"]:checked');
      if (checked.length === 0) {
        document.getElementById('interests-grid').style.border = '2px solid #e74c3c';
        document.getElementById('interests-grid').style.padding = '10px';
        document.getElementById('interests-grid').style.borderRadius = '10px';
        isValid = false;
      } else {
        document.getElementById('interests-grid').style.border = 'none';
        document.getElementById('interests-grid').style.padding = '0';
      }
    }

    // Specific validation for Step 4 (Radios)
    if (step === 4) {
      const q1 = document.querySelector('input[name="mcq1"]:checked');
      const q2 = document.querySelector('input[name="mcq2"]:checked');
      const q3 = document.querySelector('input[name="mcq3"]:checked');
      if (!q1 || !q2 || !q3) {
        isValid = false;
      }
    }

    if(!isValid) alert('Please complete all required fields in this step.');
    return isValid;
  }

  function nextStep() {
    if (validateStep(currentStep)) {
      currentStep++;
      updateFormUI();
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
  }

  function prevStep() {
    if (currentStep > 1) {
      currentStep--;
      updateFormUI();
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
  }

  // ==========================================
  // FILE HANDLING
  // ==========================================
  function handleFileSelect(event) {
    const file = event.target.files[0];
    if (!file) return;
    if (file.type !== 'application/pdf') { alert('Only PDF files are allowed.'); return; }
    if (file.size > 5 * 1024 * 1024) { alert('File size must be less than 5MB.'); return; }

    cvFileNameTemp = file.name;
    document.getElementById('cv-filename-display').innerText = `Selected: ${file.name}`;
    document.getElementById('cv-dropzone').style.borderColor = 'var(--embs-purple)';
    document.getElementById('cv-dropzone').style.backgroundColor = 'rgba(119, 37, 131, 0.05)';

    const reader = new FileReader();
    reader.onload = function(e) {
      document.getElementById('cv_base64').value = e.target.result.split(',')[1];
    };
    reader.readAsDataURL(file);
  }

  // ==========================================
  // SUBMISSION TO GOOGLE APPS SCRIPT
  // ==========================================
  async function submitApplication() {
    if (!validateStep(currentStep)) return;


    const encodedURL = "aHR0cHM6Ly9zY3JpcHQuZ29vZ2xlLmNvbS9tYWNyb3Mvcy9BS2Z5Y2J4Tm11Tnk4N28zQWllVUlkNlFTZmJyQmRZY1NxazJmRGc0OG5CVFlYS3ByeUR2dzQtUU9fYUZzeWxWaW9kckEwMnpSdy9leGVj";

    const SCRIPT_URL = atob(encodedURL);

    document.getElementById('loading-overlay').style.display = 'flex';

    // Gather Checkboxes
    let selectedInterests = [];
    document.querySelectorAll('input[type="checkbox"]:checked').forEach(box => {
      selectedInterests.push(box.value);
    });

    // Gather MCQs
    let mcqResults = `Q1: ${document.querySelector('input[name="mcq1"]:checked').value} | ` +
                     `Q2: ${document.querySelector('input[name="mcq2"]:checked').value} | ` +
                     `Q3: ${document.querySelector('input[name="mcq3"]:checked').value}`;

    // Gather Essays
    let essayResults = `Problem Solving: ${document.getElementById('e_problem').value} \n\n` +
                       `Methodology: ${document.getElementById('e_method').value} \n\n` +
                       `Goal: ${document.getElementById('e_goal').value}`;

    const payload = {
      action: 'submit_research_application',
      timestamp: new Date().toISOString(),
      name: document.getElementById('a_name').value,
      university: document.getElementById('a_university').value,
      email: document.getElementById('a_email').value,
      phone: document.getElementById('a_phone').value,
      student_id: document.getElementById('a_studentid').value,
      gender: document.getElementById('a_gender').value,
      linkedin: document.getElementById('a_linkedin').value || 'Not provided',
      cv_filename: cvFileNameTemp,
      cv_data: document.getElementById('cv_base64').value,
      faculty: document.getElementById('a_faculty').value,
      department: document.getElementById('a_department').value,
      academic_year: document.getElementById('a_year').value,
      gpa: document.getElementById('a_gpa').value,
      
      // New grouped data
      interests: selectedInterests.join(', '),
      skills: `Programming: ${document.getElementById('s_prog').value} | Math: ${document.getElementById('s_math').value}`,
      mcqs: mcqResults,
      essays: essayResults
    };

    try {
      const response = await fetch(SCRIPT_URL, {
        method: 'POST',
        body: JSON.stringify(payload)
      });

      const result = await response.json();
      document.getElementById('loading-overlay').style.display = 'none';

      if (result.status === 'success') {
        alert('Application submitted successfully! Please check your email for confirmation.');
        location.reload(); // Refresh page to clear memory
      } else {
        alert('Submission failed: ' + result.message);
      }
    } catch (error) {
      document.getElementById('loading-overlay').style.display = 'none';
      alert('Error connecting to server. Please try again.');
      console.error(error);
    }
  }
</script>
</body>
</html>
